.feed_section
	- @publications.each do |post|
		- @local_asker = post.asker
		- @conversation = nil
		- responded = false
		- if @responses[post.id]
			- @conversation = @responses[post.id].first
			- responded = true
		.conversation.border-color{:asker_id => @local_asker.id}
			.post.parent{:class => ("answered" if responded), :post_id => post.id}
				%i.icon-share-alt{:style => ("display: none;" unless responded)}
				- retweeted = (current_user and @actions[post.id] and @actions[post.id].select { |a| a[:interaction_type] == 3 and a[:user][:id] == current_user.id}.present?) ? true : false
				%i.icon-retweet{:style => ("display: none;" unless retweeted)}
				.content
					- if post.question.user_id != 1 # and @asker.author_id != post.question.user_id 
						- user = post.question.user
						= image_tag(user.twi_profile_img_url, :class => "rounded")
						%i.icon-user
						%h5= user.twi_screen_name
					- else
						= image_tag(@local_asker.twi_profile_img_url, :class => "rounded")
						%h5= @local_asker.twi_screen_name
					%p.question_text= post.question.text
					.post_actions
						%a.expand Answer
						- unless retweeted
							%a.quiz.rollover 
								%i.icon-retweet
								Retweet
				- unless responded
					.answers.rounded.border{:style => "display: none;"}
						- answers = post.question.answers.shuffle
						- count = answers.size
						- answers.each_with_index do |answer, i|
							%h3{:class => ("bottom_border" if i < (count - 1)), :correct => answer["correct"].to_s, :answer_id => answer.id}= answer.text
							.answer_container.input{:type => 'text'}
								.shadow-top
								.tweet
									%span#account= "@#{@local_asker.twi_screen_name}"
									%span#answer= " #{answer.tweetable(@local_asker.twi_screen_name)}"
								.answer_controls
									%a.tweet_button.btn.btn-primary{:href => ("/auth/twitter?feed_id=#{@local_asker.id}&post_id=#{post.id}&answer_id=#{answer.id}" unless current_user)} Tweet!
								.shadow-bottom
			.subsidiaries{:style => "display: none;"}
				- if @conversation
					= render :partial => "conversation"
			.loading{:style => "display: none;"}
				Loading...	
			= render :partial => "activity", :locals => {:post => post}